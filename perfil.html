<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil do Usu√°rio</title>
    <link rel="stylesheet" href="geral.css">
    <link rel="stylesheet" href="perfil.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="./imagens/logo cultivar +(sem fundo).png" alt="Logo do Site">
        </div>
        <nav class="nav-links">
            <a href="index.html"><img src="./imagens/home.png" alt="In√≠cio"></a>
            <a href="sobre.html"><img src="./imagens/Sobre (1).png" alt="Sobre"></a>
            <a href="carrinho.html"><img src="./imagens/carrinho.png" alt="Carrinho"></a>
        </nav>

        <div class="actions">
            <button class="settings" id="settingsBtn">
                <img src="./imagens/configuracao.png" alt="Configura√ß√µes">
            </button>
        </div>

        <div class="dropdown" id="dropdownMenu">
            <a href="perfil.html" class="item">
                <img src="./imagens/perfil (1).png" alt="Perfil">
                <span>Perfil</span>
            </a>
            <a href="historico.html" class="item">
                <img src="./imagens/historia.png" alt="Hist√≥rico">
                <span>Hist√≥rico</span>
            </a>
            <a href="admin.html" class="item">
                <img src="./imagens/homem-de-terno-e-gravata.png" alt="Admin">
                <span>Admin</span>
            </a>
            <a href="contato.html" class="item">
                <img src="./imagens/contato (1).png" alt="contato">
                <span>Contato</span>
            </a>
        </div>
    </header>

    <main>
        <h1>Perfil do Usu√°rio</h1>

        <!-- Aviso para quem veio do carrinho -->
        <div id="avisoCarrinho" class="aviso-carrinho" style="display: none;">
            <p>üéØ <strong>Complete seu cadastro para finalizar a compra!</strong></p>
            <p>Fa√ßa login ou crie uma conta para continuar.</p>
        </div>

        <!-- Sistema de Abas: Cadastro e Login -->
        <div id="form-container">
            <div class="abas">
                <button class="aba-btn active" data-aba="cadastro">Criar Conta</button>
                <button class="aba-btn" data-aba="login">Fazer Login</button>
            </div>

            <!-- Formul√°rio de Cadastro -->
            <form id="cadastroForm" class="aba-conteudo active">
                <div class="form-group">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" required>
                </div>

                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" required>
                </div>

                <div class="form-group">
                    <label for="senha">Senha:</label>
                    <input type="password" id="senha" required minlength="6">
                </div>

                <div class="form-actions">
                    <button type="submit">Criar Conta</button>
                </div>
            </form>

            <!-- Formul√°rio de Login -->
            <form id="loginForm" class="aba-conteudo">
                <label for="loginEmail">E-mail:</label>
                <input type="email" id="loginEmail" required>

                <label for="loginSenha">Senha:</label>
                <input type="password" id="loginSenha" required>

                <div id="loginError" class="error-message" style="display: none;">
                    E-mail ou senha incorretos!
                </div>

                <button type="submit">Entrar</button>

            </form>
        </div>

        <!-- Perfil do usu√°rio -->
        <div id="perfil-container" class="perfil-info" style="display: none;">
            <p><strong>Nome:</strong> <span id="perfil-nome"></span></p>
            <p><strong>Email:</strong> <span id="perfil-email"></span></p>

            <div class="perfil-actions">
                <button class="logout" onclick="logout()">Sair</button>
                <button class="reset-password-btn" id="resetPasswordBtn">Redefinir Senha</button>
                <button class="voltar-carrinho-btn" id="voltarCarrinhoBtn" style="display: none;">Voltar ao
                    Carrinho</button>
            </div>

            <!-- Nova se√ß√£o de formas de pagamento -->
            <div class="payment-section">
                <div class="payment-header">
                    <h3>Formas de Pagamento</h3>
                    <button id="togglePaymentForm" class="btn-toggle-payment">
                        <span id="togglePaymentText">Adicionar Cart√£o</span>
                        <span class="toggle-icon">+</span>
                    </button>
                </div>

                <!-- Formul√°rio para adicionar cart√£o (inicialmente oculto) -->
                <form id="paymentForm" class="payment-form" style="display: none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cardNumber">N√∫mero do Cart√£o</label>
                            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="cardName">Nome no Cart√£o</label>
                            <input type="text" id="cardName" placeholder="JO√ÉO M SILVA">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="cardExpiry">Validade</label>
                            <input type="text" id="cardExpiry" placeholder="MM/AA" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="cardCVV">CVV</label>
                            <input type="text" id="cardCVV" placeholder="123" maxlength="3">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-save">Salvar Cart√£o</button>
                        <button type="button" id="cancelPayment" class="btn-cancel">Cancelar</button>
                    </div>
                </form>

                <!-- Lista de cart√µes salvos -->
                <div id="savedCards" class="saved-cards">
                    <!-- Cart√µes ser√£o adicionados dinamicamente aqui -->
                </div>

                <!-- M√©todos de pagamento alternativos -->
                <div class="alternative-payments">
                    <h4>Outras formas de pagamento</h4>
                    <div class="payment-options">
                        <button type="button" class="payment-option-btn" data-method="Pix">
                            <span class="payment-icon">üè¶</span>
                            <span>Pix</span>
                        </button>
                        <button type="button" class="payment-option-btn" data-method="Boleto">
                            <span class="payment-icon">üìÑ</span>
                            <span>Boleto</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Sistema de Redefini√ß√£o de Senha -->
    <div class="reset-overlay" id="resetOverlay">
        <div class="reset-container">
            <button class="reset-close" id="resetClose">&times;</button>

            <!-- Passo 1: Solicitar redefini√ß√£o -->
            <div id="resetStep1" class="reset-step active">
                <h2>Redefinir Senha</h2>
                <p>Digite seu e-mail para receber um c√≥digo de verifica√ß√£o.</p>

                <div id="resetMessage1" class="reset-message"></div>

                <form id="resetRequestForm">
                    <div>
                        <label for="resetEmail">E-mail</label>
                        <input type="email" id="resetEmail" required>
                    </div>

                    <button type="submit">Enviar C√≥digo</button>
                </form>
            </div>

            <!-- Passo 2: Inserir c√≥digo de verifica√ß√£o -->
            <div id="resetStep2" class="reset-step">
                <h2>Verificar C√≥digo</h2>
                <p>Digite o c√≥digo de verifica√ß√£o que enviamos para o seu e-mail.</p>

                <div id="resetMessage2" class="reset-message"></div>

                <form id="verifyCodeForm">
                    <div>
                        <label for="resetCode">C√≥digo de Verifica√ß√£o</label>
                        <input type="text" id="resetCode" required>
                    </div>

                    <button type="submit">Verificar C√≥digo</button>
                </form>

                <div class="reset-back">
                    <a href="#" id="backToResetStep1">Voltar</a>
                </div>
            </div>

            <!-- Passo 3: Definir nova senha -->
            <div id="resetStep3" class="reset-step">
                <h2>Nova Senha</h2>
                <p>Digite sua nova senha.</p>

                <div id="resetMessage3" class="reset-message"></div>

                <form id="newPasswordForm">
                    <div>
                        <label for="newPassword">Nova Senha</label>
                        <input type="password" id="newPassword" required minlength="6">
                    </div>

                    <div>
                        <label for="confirmPassword">Confirmar Nova Senha</label>
                        <input type="password" id="confirmPassword" required minlength="6">
                    </div>

                    <button type="submit">Redefinir Senha</button>
                </form>

                <div class="reset-back">
                    <a href="#" id="backToResetStep2">Voltar</a>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Cultivar +</p>
    </footer>

    <script src="perfil.js"></script>
</body>

</html>