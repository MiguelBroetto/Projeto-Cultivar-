<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil do Usuário</title>
  <link rel="stylesheet" href="perfil.css">
</head>

<body>
  <header>
    <div class="logo">
      <img src="./imagens/logo cultivar +(sem fundo).png" alt="Logo do Site">
    </div>
    <nav>
      <ul>
        <li>
          <a href="index.html" class="inicio-link">
            <img src="./imagens/home.png" alt="inicio">
          </a>
        </li>
        <li>
          <a href="sobre.html" class="sobre-link">
            <img src="./imagens/Sobre (1).png" alt="sobre">
          </a>
        </li>
        <li>
          <a href="carrinho.html" class="carrinho-link">
            <img src="./imagens/carrinho.png" alt="Carrinho">
          </a>
        </li>
        <li>
          <a href="contato.html" class="contato-link">
            <img src="./imagens/contato (1).png" alt="contato">
          </a>
        </li>
        <li>
          <a href="perfil.html" class="perfil-link">
            <img src="./imagens/perfil (1).png" alt="perfil">
          </a>
        </li>
      </ul>
    </nav>
  </header>

  <main>
    <h1>Perfil do Usuário</h1>

    <!-- Formulário de cadastro -->
    <div id="form-container">
      <form id="cadastroForm">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" required>

        <label for="email">E-mail:</label>
        <input type="email" id="email" required>

        <label for="senha">Senha:</label>
        <input type="password" id="senha" required>

        <button type="submit">Criar Conta</button>
      </form>
    </div>

    <!-- Perfil do usuário -->
    <div id="perfil-container" class="perfil-info" style="display: none;">
      <p><strong>Nome:</strong> <span id="perfil-nome"></span></p>
      <p><strong>Email:</strong> <span id="perfil-email"></span></p>
      <button class="logout" onclick="logout()">Sair</button>

      <!-- Formas de pagamento -->
      <div class="pagamentos">
        <h2>Adicionar forma de pagamento</h2>

        <!-- FORMULÁRIO QUE VOCÊ ME PASSOU -->
        <form id="formPerfil">
          <label>Forma de Pagamento:</label>
          <select id="pagamento">
            <option value="Cartão de Crédito">Cartão de Crédito</option>
            <option value="Pix">Pix</option>
            <option value="Boleto">Boleto</option>
          </select>
          <button type="submit">Salvar</button>
        </form>

        <div id="listaPagamentos"></div>
      </div>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Minha Loja - Todos os direitos reservados</p>
  </footer>

  <script>
    const formContainer = document.getElementById("form-container");
    const perfilContainer = document.getElementById("perfil-container");
    const cadastroForm = document.getElementById("cadastroForm");
    const perfilNome = document.getElementById("perfil-nome");
    const perfilEmail = document.getElementById("perfil-email");
    const listaPagamentos = document.getElementById("listaPagamentos");

    // Verifica se já existe usuário logado
    window.onload = function () {
      const usuario = JSON.parse(localStorage.getItem("usuario"));
      if (usuario) {
        mostrarPerfil(usuario);
      }
    };

    // Cadastrar usuário
    cadastroForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const usuario = {
        nome: document.getElementById("nome").value,
        email: document.getElementById("email").value,
        senha: document.getElementById("senha").value,
      };
      localStorage.setItem("usuario", JSON.stringify(usuario));
      mostrarPerfil(usuario);
    });

    // Mostrar perfil
    function mostrarPerfil(usuario) {
      formContainer.style.display = "none";
      perfilContainer.style.display = "block";
      perfilNome.textContent = usuario.nome;
      perfilEmail.textContent = usuario.email;
      mostrarPagamentos();
    }

    // Logout
    function logout() {
      localStorage.removeItem("usuario");
      localStorage.removeItem("formaPagamento");
      formContainer.style.display = "block";
      perfilContainer.style.display = "none";
    }

    // Salvar forma de pagamento (seu código adaptado)
    document.getElementById("formPerfil").addEventListener("submit", (e) => {
      e.preventDefault();
      const pagamento = document.getElementById("pagamento").value;
      localStorage.setItem("formaPagamento", pagamento);
      alert("Forma de pagamento salva com sucesso!");
      mostrarPagamentos();
    });

    // Mostrar lista de pagamentos
    function mostrarPagamentos() {
      listaPagamentos.innerHTML = "";
      const pagamentoSalvo = localStorage.getItem("formaPagamento");
      if (pagamentoSalvo) {
        const div = document.createElement("div");
        div.classList.add("pagamento-item");
        div.textContent = `Forma de pagamento: ${pagamentoSalvo}`;
        listaPagamentos.appendChild(div);
      }
    }
  </script>

</body>
</html>
