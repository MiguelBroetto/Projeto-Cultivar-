<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cultivar +</title>
  <link rel="stylesheet" href="geral.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header class="header">
    <div class="logo">
      <img src="./imagens/logo cultivar +(sem fundo).png" alt="Logo do Site">
    </div>
    <nav class="nav-links">
      <a href="index.html"><img src="./imagens/home.png" alt="In√≠cio"></a>
      <a href="sobre.html"><img src="./imagens/Sobre (1).png" alt="Sobre"></a>
      <a href="carrinho.html"><img src="./imagens/carrinho.png" alt="Carrinho"></a>
    </nav>



    <div class="actions">
      <button class="settings" id="settingsBtn">
        <img src="./imagens/configuracao.png" alt="Configura√ß√µes">
      </button>
    </div>


    <div class="dropdown" id="dropdownMenu">
      <a href="perfil.html" class="item">
        <img src="./imagens/perfil (1).png" alt="Perfil">
        <span>Perfil</span>
      </a>
      <a href="historico.html" class="item">
        <img src="./imagens/historia.png" alt="Hist√≥rico">
        <span>Hist√≥rico</span>
      </a>
      <a href="admin.html" class="item">
        <img src="./imagens/homem-de-terno-e-gravata.png" alt="Admin">
        <span>Admin</span>
      </a>
      <a href="contato.html" class="item">
        <img src="./imagens/contato (1).png" alt="contato">
        <span>Contato</span>
      </a>
    </div>
  </header>
  <center>
    <main>
      <h1>Nossos Produtos</h1>

      <!-- FILTROS -->
      <div class="filtros">
        <label for="categoriaFiltro">Categoria:</label>
        <select id="categoriaFiltro">
          <option value="">Todas as Categorias</option>
          <option value="fertilizante">Fertilizantes</option>
          <option value="Inseticida">Inseticida</option>
          <option value="Sementes">Sementes</option>
          <option value="construcao">Constru√ß√£o Agr√≠cola</option>
          <option value="Maquinario">Maquinario Agr√≠cola</option>
        </select>

        <label for="precoFiltro">Faixa de Pre√ßo:</label>
        <select id="precoFiltro">
          <option value="">Todos os Pre√ßos</option>
          <option value="1">R$2 - R$100</option>
          <option value="2">R$101 - R$500</option>
          <option value="3">R$501 - R$1.000</option>
          <option value="4">R$1.001 - R$10.000</option>
          <option value="5">R$10.001 - R$100.000</option>
          <option value="6">R$100.001 - R$500.000</option>
          <option value="7">R$500.001 - R$1.000.000</option>
          <option value="8">R$1.000.001 - R$5.000.000</option>
          <option value="9">Acima de R$5.000.000</option>
        </select>


        <button class="botao-filtrar" onclick="filtrarProdutos()">Aplicar Filtros</button>
        <button class="botao-limpar" onclick="limparFiltros()">Limpar Filtros</button>
      </div>

      <!-- MENSAGEM QUANDO N√ÉO H√Å PRODUTOS -->
      <p id="mensagemVazia" class="mensagem-vazia" style="display: none;"> Nenhum produto cadastrado com essas
        condi√ß√µes. </p>

      <!-- LISTA DE PRODUTOS -->
      <di class="produtos" id="listaProdutos">
        <div class="produto" data-categoria="fertilizante" data-preco="99.90">
          <img src="./imagens/adubo.png" alt="Adubo Org√¢nico">
          <h2>Komatsu Garden</h2>
          <p class="descricao">Ideal para cultivo sustent√°vel.</p>
          <p class="preco">R$ 99,90</p>
          <button class="btn1-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Inseticida" data-preco="64.90">
          <img src="./imagens/Inseticida.jpg" alt="Fipromix">
          <h2>Fipromix </h2>
          <p class="descricao">Alta durabilidade para irriga√ß√£o.</p>
          <p class="preco">R$ 64,90</p>
          <button class="btn2-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Inseticida" data-preco="59.90">
          <img src="./imagens/Herbicida.jpg" alt="Gramizap Herbicida">
          <h2> Gramizap Herbicida </h2>
          <p class="descricao">Resistente e f√°cil de instalar.</p>
          <p class="preco">R$ 59,90</p>
          <button class="btn3-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="fertilizante" data-preco="189.90">
          <img src="./imagens/fertilizante.png" alt="VeloKelp">
          <h2>VeloKelp</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 189,90</p>
          <button class="btn4-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Inseticida" data-preco=" 1040.00">
          <img src="./imagens/Bactericida.jpg" alt=" Bactericida (Cloreto de Benzalc√¥nio 50%)">
          <h2> Bactericida (Cloreto de Benzalc√¥nio 50%)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 1.040,00</p>
          <button class="btn5-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="fertilizante" data-preco=" 159.99">
          <img src="./imagens/adubos3em1.webp" alt="Kit de Aduba√ß√£o">
          <h2>Kit de Aduba√ß√£o</h2> <br>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 159,99</p>
          <button class="btn6-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Sementes" data-preco=" 2 ">
          <img src="./imagens/cafe.webp" alt="Muda de Caf√© Ar√°bica">
          <h2>Muda de Caf√© Ar√°bica</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 2,00 por muda</p>
          <button class="btn7-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Sementes" data-preco=" 3">
          <img src="./imagens/soja.jpg" alt="Semente de Soja">
          <h2>Semente de Soja</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 3,00 por muda</p>
          <button class="btn8-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 446.99">
          <img src="./imagens/estufa.jpg" alt="Estufa de Jardim Port√°til (Tipo Viveiro)">
          <h2>Estufa de Jardim Port√°til (Tipo Viveiro)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 446,99</p>
          <button class="btn9-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco="  4600000">
          <img src="./imagens/GradeNiveladora.jpg" alt="Grade Niveladora">
          <h2>Grade Niveladora</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco"> R$ 460.000,00</p>
          <button class="btn10-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 2500000">
          <img src="./imagens/AradoDeDisco.jpg" alt="Arado de Disco (Fixo ou Revers√≠vel)">
          <h2>Arado de Disco (Fixo ou Revers√≠vel)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 25.000,00</p>
          <button class="btn11-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 2000000">
          <img src="./imagens/colheitadeira.webp" alt="Colheitadeira de Gr√£os (Automotriz)">
          <h2>Colheitadeira de Gr√£os (Automotriz)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 2.0000.000.00</p>
          <button class="btn12-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 500000000">
          <img src="./imagens/mineColheitadeira.jpg" alt="Minicolheitadeira de Gr√£os (Automotriz)">
          <h2>Minicolheitadeira de Gr√£os (Automotriz)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 5000.000.00</p>
          <button class="btn13-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 250000000">
          <img src="./imagens/trator.webp" alt="Trator Agr√≠cola de Grande Porte (John Deere S√©rie 7R/8R)">
          <h2>Trator Agr√≠cola de Grande Porte (John Deere S√©rie 7R/8R)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$2.500.000.00</p>
          <button class="btn14-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 80000000">
          <img src="./imagens/trator2xTras√£o.jpg" alt="Trator Agr√≠cola com Tra√ß√£o nas Quatro Rodas">
          <h2>Trator Agr√≠cola com Tra√ß√£o nas Quatro Rodas</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 800.000.00</p>
          <button class="btn15-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 25000000">
          <img src="./imagens/plantadeira.webp" alt="Plantadeira em Linha (Semeadeira de Precis√£o)">
          <h2>Plantadeira em Linha (Semeadeira de Precis√£o)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 250.000.00</p>
          <button class="btn16-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 1.00000000">
          <img src="./imagens/semeadoraHidraulica.jpg" alt="Semeadora/Plantadeira Hidr√°ulica de Arrasto">
          <h2>Semeadora/Plantadeira Hidr√°ulica de Arrasto</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco"> R$ 1.000.000.00</p>
          <button class="btn17-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 12000000">
          <img src="./imagens/dronePulverizador.jpeg" alt="Drone Pulverizador Agr√≠cola Multirrotor">
          <h2>Drone Pulverizador Agr√≠cola Multirrotor</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 120.000,00</p>
          <button class="btn18-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 2500000">
          <img src="./imagens/droneVigia.jpg" alt="Drone de Mapeamento e Vigil√¢ncia (VANT)">
          <h2>Drone de Mapeamento e Vigil√¢ncia (VANT)</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p>
          <p class="preco">R$ 25.000,00</p>
          <button class="btn19-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 700000000">
          <img src="./imagens/aviao.webp" alt="Avi√£o Agr√≠cola">
          <h2>Avi√£o Agr√≠cola</h2>
          <p class="descricao">Alta performance para solo f√©rtil.</p> <br>
          <p class="preco">R$ 7000.000,00</p>
          <button class="btn20-descricao">Descri√ß√£o</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div> <!-- Fecha a lista de produtos principal -->

        <!-- CAT√ÅLOGO DE PRODUTOS RELACIONADOS -->
        <div id="catalogoRelacionado" style="display: none; margin-top: 50px;">
          <h2 style="text-align: center; color: #2f4f2f; margin-bottom: 30px;">
            üí° Produtos que podem te interessar
          </h2>
          <div class="produtos-relacionados" id="listaProdutosRelacionados">
            <!-- Produtos relacionados ser√£o carregados aqui -->
          </div>
        </div>

    </main>
  </center>

  <footer>
    <p>&copy; 2025 Cultivar +</p>
  </footer>

  <script>
    // === FILTROS ===
    function filtrarProdutos() {
  const categoria = document.getElementById("categoriaFiltro").value;
  const preco = document.getElementById("precoFiltro").value;
  const produtos = document.querySelectorAll(".produto");
  const mensagem = document.getElementById("mensagemVazia");
  let produtosVisiveis = 0;

  produtos.forEach(produto => {
    const catProduto = produto.dataset.categoria;
    const precoProduto = Number(produto.dataset.preco);
    let exibir = true;

    // Categoria
    if (categoria && catProduto !== categoria) exibir = false;

    // Faixa de pre√ßo
    if (preco) {
      switch(preco) {
        case "1": if (!(precoProduto >= 2 && precoProduto <= 100)) exibir = false; break;
        case "2": if (!(precoProduto > 100 && precoProduto <= 500)) exibir = false; break;
        case "3": if (!(precoProduto > 500 && precoProduto <= 1000)) exibir = false; break;
        case "4": if (!(precoProduto > 1000 && precoProduto <= 10000)) exibir = false; break;
        case "5": if (!(precoProduto > 10000 && precoProduto <= 100000)) exibir = false; break;
        case "6": if (!(precoProduto > 100000 && precoProduto <= 500000)) exibir = false; break;
        case "7": if (!(precoProduto > 500000 && precoProduto <= 1000000)) exibir = false; break;
        case "8": if (!(precoProduto > 1000000 && precoProduto <= 5000000)) exibir = false; break;
        case "9": if (!(precoProduto > 5000000)) exibir = false; break;
      }
    }

    produto.style.display = exibir ? "block" : "none";
    if (exibir) produtosVisiveis++;
  });

  // Mostra/oculta mensagem de produtos n√£o encontrados
  if (produtosVisiveis === 0) {
    mensagem.textContent = "Nenhum produto cadastrado com essas condi√ß√µes.";
    mensagem.style.display = "block";
    document.getElementById("catalogoRelacionado").style.display = "none";
  } else {
    mensagem.style.display = "none";
    
    // MOSTRA PRODUTOS RELACIONADOS se filtrou por categoria
    if (categoria) {
      mostrarProdutosRelacionados(categoria);
    } else {
      document.getElementById("catalogoRelacionado").style.display = "none";
    }
  }
}
    // Limpar filtros
    function limparFiltros() {
  document.getElementById("categoriaFiltro").value = "";
  document.getElementById("precoFiltro").value = "";
  const produtos = document.querySelectorAll(".produto");
  produtos.forEach(produto => produto.style.display = "block");
  document.getElementById("mensagemVazia").style.display = "none";
  
  // ESCONDE produtos relacionados quando limpa filtros
  document.getElementById("catalogoRelacionado").style.display = "none";
}

    // Limpar filtros
    function limparFiltros() {
      document.getElementById("categoriaFiltro").value = "";
      document.getElementById("precoFiltro").value = "";
      const produtos = document.querySelectorAll(".produto");
      produtos.forEach(produto => produto.style.display = "block");
      document.getElementById("mensagemVazia").style.display = "none";
    }



    // === A√á√ïES DOS BOT√ïES ===
    document.querySelectorAll(".produto").forEach((produto, index) => {
      const btnDescricao = produto.querySelector("button[class*='-descricao']");
      const btnCarrinho = produto.querySelector(".btn-comprar");

      // --- DESCRI√á√ÉO ---
      if (btnDescricao) {
        btnDescricao.addEventListener("click", () => {
          const nome = produto.querySelector("h2") ? produto.querySelector("h2").innerText : ("Produto " + (index + 1));
          const preco = produto.querySelector(".preco") ? produto.querySelector(".preco").innerText : "";
          const descricao = produto.querySelector(".descricao") ? produto.querySelector(".descricao").innerText : "";
          const imagem = produto.querySelector("img") ? produto.querySelector("img").getAttribute("src") : "";

          // Salvamos em duas chaves pra compatibilidade com p√°ginas diferentes
          const produtoDescricao = { nome, preco, descricao, imagem };
          const produtoSelecionado = { id: index + 1, ...produtoDescricao };

          localStorage.setItem("produtoDescricao", JSON.stringify(produtoDescricao));
          localStorage.setItem("produtoSelecionado", JSON.stringify(produtoSelecionado));

          // Redireciona para a p√°gina de detalhes.
          // *Se sua p√°gina de detalhes se chama "Produto.html", mant√©m assim.*
          // *Se chama "produtos.html", troque abaixo para 'produtos.html'.*
          window.location.href = "Produto.html";
        });
      }

      // --- ADICIONAR AO CARRINHO ---
      if (btnCarrinho) {
        btnCarrinho.addEventListener("click", () => {
          const nome = produto.querySelector("h2") ? produto.querySelector("h2").innerText : ("Produto " + (index + 1));
          const preco = produto.querySelector(".preco") ? produto.querySelector(".preco").innerText : "";
          const descricao = produto.querySelector(".descricao") ? produto.querySelector(".descricao").innerText : "";
          const imagem = produto.querySelector("img") ? produto.querySelector("img").getAttribute("src") : "";

          let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
          carrinho.push({ nome, preco, descricao, imagem });
          localStorage.setItem("carrinho", JSON.stringify(carrinho));

          btnCarrinho.innerText = "Adicionado!";
          btnCarrinho.disabled = true;
          setTimeout(() => {
            btnCarrinho.innerText = "Adicionar ao Carrinho";
            btnCarrinho.disabled = false;
          }, 1500);
        });
      }
    });
  </script>

  <script>
    // === CARREGAR PRODUTOS CADASTRADOS ===
    function carregarProdutosCadastrados() {
      const produtosCadastrados = JSON.parse(localStorage.getItem('produtosCadastrados')) || [];
      const listaProdutos = document.getElementById('listaProdutos');

      console.log("Produtos cadastrados encontrados:", produtosCadastrados.length);

      if (produtosCadastrados.length === 0) return;

      produtosCadastrados.forEach((produto, index) => {
        // Criar elemento do produto
        const divProduto = document.createElement('div');
        divProduto.className = 'produto';
        divProduto.setAttribute('data-categoria', produto.categoria);
        divProduto.setAttribute('data-preco', produto.preco);

        // Offset para n√£o conflitar com os IDs existentes
        const offsetId = 1000 + index;

        // Apenas mostra uma descri√ß√£o curta no card (primeiras palavras)
        const descricaoCurta = produto.descricao.split(' ').slice(0, 10).join(' ') + '...';

        divProduto.innerHTML = `
            <img src="${produto.imagem}" alt="${produto.nome}" onerror="this.src='./imagens/placeholder.jpg'">
            <h2>${produto.nome}</h2>
            <p class="descricao">${descricaoCurta}</p>
            <p class="preco">R$ ${produto.preco.toFixed(2).replace('.', ',')}</p>
            <button class="btn${offsetId}-descricao">Descri√ß√£o</button>
            <button class="btn-comprar">Adicionar ao Carrinho</button>
        `;

        listaProdutos.appendChild(divProduto);

        // Adicionar eventos aos bot√µes
        const btnDescricao = divProduto.querySelector(`.btn${offsetId}-descricao`);
        const btnCarrinho = divProduto.querySelector('.btn-comprar');

        if (btnDescricao) {
          btnDescricao.addEventListener('click', () => {
            console.log("Clicou em descri√ß√£o do produto:", produto.nome);

            const produtoDescricao = {
              id: offsetId, // ID √∫nico para o produto
              nome: produto.nome,
              preco: `R$ ${produto.preco.toFixed(2).replace('.', ',')}`,
              descricao: produto.descricaoCompleta || produto.descricao, // Descri√ß√£o COMPLETA
              imagem: produto.imagem
            };

            // Salva para o Produto.html
            localStorage.setItem("produtoDescricao", JSON.stringify(produtoDescricao));
            localStorage.setItem("produtoSelecionado", JSON.stringify(produtoDescricao));

            console.log("Redirecionando para Produto.html");
            // Redireciona para Produto.html
            window.location.href = "Produto.html";
          });
        }

        if (btnCarrinho) {
          btnCarrinho.addEventListener('click', () => {
            let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
            carrinho.push({
              nome: produto.nome,
              preco: `R$ ${produto.preco.toFixed(2).replace('.', ',')}`,
              descricao: descricaoCurta, // Usa a descri√ß√£o curta no carrinho
              imagem: produto.imagem
            });
            localStorage.setItem("carrinho", JSON.stringify(carrinho));

            btnCarrinho.innerText = "Adicionado!";
            btnCarrinho.disabled = true;
            setTimeout(() => {
              btnCarrinho.innerText = "Adicionar ao Carrinho";
              btnCarrinho.disabled = false;
            }, 1500);
          });
        }
      });
    }

    // Carregar produtos cadastrados quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', function () {
      carregarProdutosCadastrados();
    });

    // === ATUALIZAR LISTA DE PRODUTOS ===
    function atualizarListaProdutos() {
      // Remove todos os produtos cadastrados atuais
      document.querySelectorAll('.produto').forEach(produto => {
        if (produto.querySelector('button[class*="btn"][class*="descricao"]')) {
          const btnClass = produto.querySelector('button[class*="btn"][class*="descricao"]').className;
          if (btnClass && btnClass.includes('btn') && parseInt(btnClass.match(/btn(\d+)-descricao/)?.[1]) >= 1000) {
            produto.remove();
          }
        }
      });

      // Recarrega os produtos cadastrados
      carregarProdutosCadastrados();
    }

    // Observar mudan√ßas no localStorage para atualizar automaticamente
    window.addEventListener('storage', function (e) {
      if (e.key === 'produtosCadastrados') {
        atualizarListaProdutos();
      }
    });

    // Tamb√©m atualizar quando a p√°gina ganhar foco (√∫til quando voltar da admin)
    window.addEventListener('focus', function () {
      atualizarListaProdutos();
    });


    // icone de configura√ß√£o 

    const settingsBtn = document.getElementById('settingsBtn');
    const dropdownMenu = document.getElementById('dropdownMenu');


    settingsBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      dropdownMenu.classList.toggle('active');
    });


    document.addEventListener('click', (e) => {
      if (!dropdownMenu.contains(e.target) && e.target !== settingsBtn) {
        dropdownMenu.classList.remove('active');
      }
    });
  </script>
  <script src="prodRelacionados.js"></script>
</body>
</html>