<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cultivar +</title>
  <link rel="stylesheet" href="geral.css">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header>
    <div class="logo">
        <img src="./imagens/logo cultivar +(sem fundo).png" alt="Logo do Site">
    </div>
    <nav>
        <ul>
            <li><a href="index.html" class="inicio-link"><img id="img_home" src="./imagens/home.png" alt="inicio"></a></li>
            <li><a href="sobre.html" class="sobre-link"><img id="img_sobre" src="./imagens/Sobre (1).png" alt="sobre"></a></li>
            <li><a href="carrinho.html" class="carrinho-link" id="linkCarrinho"><img id="img_carrinho" src="./imagens/carrinho.png" alt="Carrinho"></a></li>
            <li><a href="contato.html" class="contato-link"><img id="img_contato" src="./imagens/contato (1).png" alt="contato"></a></li>
            <li><a href="perfil.html" class="perfil-link"><img id="img_perfil" src="./imagens/perfil (1).png" alt="perfil"></a></li>
            <li><a href="admin.html" class="admin-link"><img id="img_admin" src="/imagens/homem-de-terno-e-gravata.png" alt="Administração"></a></li>
        </ul>
    </nav>
</header>

  <center>
    <main>
      <h1>Nossos Produtos</h1>

      <!-- FILTROS -->
      <div class="filtros">
        <label for="categoriaFiltro">Categoria:</label>
        <select id="categoriaFiltro">
          <option value="">Todas as Categorias</option>
          <option value="fertilizante">Fertilizantes</option>
          <option value="Inseticida">Inseticida</option>
          <option value="Sementes">Sementes</option>
          <option value="construcao">Construção Agrícola</option>
          <option value="Maquinario">Maquinario Agrícola</option>
        </select>

        <label for="precoFiltro">Faixa de Preço:</label>
        <select id="precoFiltro">
          <option value="">Todos os Preços</option>
          <option value="1">R$2 - R$100</option>
          <option value="2">R$101 - R$500</option>
          <option value="3">R$501 - R$1.000</option>
          <option value="4">R$1.001 - R$10.000</option>
          <option value="5">R$10.001 - R$100.000</option>
          <option value="6">R$100.001 - R$500.000</option>
          <option value="7">R$500.001 - R$1.000.000</option>
          <option value="8">R$1.000.001 - R$5.000.000</option>
          <option value="9">Acima de R$5.000.000</option>
        </select>


        <button class="botao-filtrar" onclick="filtrarProdutos()">Aplicar Filtros</button>
        <button class="botao-limpar" onclick="limparFiltros()">Limpar Filtros</button>
      </div>

      <!-- MENSAGEM QUANDO NÃO HÁ PRODUTOS -->
      <p id="mensagemVazia" class="mensagem-vazia" style="display: none;"> Nenhum produto cadastrado com essas
        condições. </p>

      <!-- LISTA DE PRODUTOS -->
      <div class="produtos" id="listaProdutos">
        <div class="produto" data-categoria="fertilizante" data-preco="99.90">
          <img src="./imagens/adubo.png" alt="Adubo Orgânico">
          <h2>Komatsu Garden</h2>
          <p class="descricao">Ideal para cultivo sustentável.</p>
          <p class="preco">R$ 99,90</p>
          <button class="btn1-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Inseticida" data-preco="64.90">
          <img src="./imagens/Inseticida.jpg" alt="Fipromix">
          <h2>Fipromix </h2>
          <p class="descricao">Alta durabilidade para irrigação.</p>
          <p class="preco">R$ 64,90</p>
          <button class="btn2-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Inseticida" data-preco="59.90">
          <img src="./imagens/Herbicida.jpg" alt="Gramizap Herbicida">
          <h2> Gramizap Herbicida </h2>
          <p class="descricao">Resistente e fácil de instalar.</p>
          <p class="preco">R$ 59,90</p>
          <button class="btn3-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="fertilizante" data-preco="189.90">
          <img src="./imagens/fertilizante.png" alt="VeloKelp">
          <h2>VeloKelp</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 189,90</p>
          <button class="btn4-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Inseticida" data-preco=" 1040.00">
          <img src="./imagens/Bactericida.jpg" alt=" Bactericida (Cloreto de Benzalcônio 50%)">
          <h2> Bactericida (Cloreto de Benzalcônio 50%)</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 1.040,00</p>
          <button class="btn5-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="fertilizante" data-preco=" 159.99">
          <img src="./imagens/adubos3em1.webp" alt="Kit de Adubação">
          <h2>Kit de Adubação</h2> <br>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 159,99</p>
          <button class="btn6-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Sementes" data-preco=" 2 ">
          <img src="./imagens/cafe.webp" alt="Muda de Café Arábica">
          <h2>Muda de Café Arábica</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 2,00 por muda</p>
          <button class="btn7-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Sementes" data-preco=" 3">
          <img src="./imagens/soja.jpg" alt="Semente de Soja">
          <h2>Semente de Soja</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 3,00 por muda</p>
          <button class="btn8-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 446.99">
          <img src="./imagens/estufa.jpg" alt="Estufa de Jardim Portátil (Tipo Viveiro)">
          <h2>Estufa de Jardim Portátil (Tipo Viveiro)</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 446,99</p>
          <button class="btn9-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco="  4600000">
          <img src="./imagens/GradeNiveladora.jpg" alt="Grade Niveladora">
          <h2>Grade Niveladora</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco"> R$ 460.000,00</p>
          <button class="btn10-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 2500000">
          <img src="./imagens/AradoDeDisco.jpg" alt="Arado de Disco (Fixo ou Reversível)">
          <h2>Arado de Disco (Fixo ou Reversível)</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 25.000,00</p>
          <button class="btn11-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 2000000">
          <img src="./imagens/colheitadeira.webp" alt="Colheitadeira de Grãos (Automotriz)">
          <h2>Colheitadeira de Grãos (Automotriz)</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 2.0000.000.00</p>
          <button class="btn12-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 500000000">
          <img src="./imagens/mineColheitadeira.jpg" alt="Minicolheitadeira de Grãos (Automotriz)">
          <h2>Minicolheitadeira de Grãos (Automotriz)</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 5000.000.00</p>
          <button class="btn13-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 250000000">
          <img src="./imagens/trator.webp" alt="Trator Agrícola de Grande Porte (John Deere Série 7R/8R)">
          <h2>Trator Agrícola de Grande Porte (John Deere Série 7R/8R)</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$2.500.000.00</p>
          <button class="btn14-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 80000000">
          <img src="./imagens/trator2xTrasão.jpg" alt="Trator Agrícola com Tração nas Quatro Rodas">
          <h2>Trator Agrícola com Tração nas Quatro Rodas</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 800.000.00</p>
          <button class="btn15-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 25000000">
          <img src="./imagens/plantadeira.webp" alt="Plantadeira em Linha (Semeadeira de Precisão)">
          <h2>Plantadeira em Linha (Semeadeira de Precisão)</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 250.000.00</p>
          <button class="btn16-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="construcao" data-preco=" 1.00000000">
          <img src="./imagens/semeadoraHidraulica.jpg" alt="Semeadora/Plantadeira Hidráulica de Arrasto">
          <h2>Semeadora/Plantadeira Hidráulica de Arrasto</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco"> R$ 1.000.000.00</p>
          <button class="btn17-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 12000000">
          <img src="./imagens/dronePulverizador.jpeg" alt="Drone Pulverizador Agrícola Multirrotor">
          <h2>Drone Pulverizador Agrícola Multirrotor</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 120.000,00</p>
          <button class="btn18-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 2500000">
          <img src="./imagens/droneVigia.jpg" alt="Drone de Mapeamento e Vigilância (VANT)">
          <h2>Drone de Mapeamento e Vigilância (VANT)</h2>
          <p class="descricao">Alta performance para solo fértil.</p>
          <p class="preco">R$ 25.000,00</p>
          <button class="btn19-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

        <div class="produto" data-categoria="Maquinario" data-preco=" 700000000">
          <img src="./imagens/aviao.webp" alt="Avião Agrícola">
          <h2>Avião Agrícola</h2>
          <p class="descricao">Alta performance para solo fértil.</p> <br>
          <p class="preco">R$ 7000.000,00</p>
          <button class="btn20-descricao">Descrição</button>
          <button class="btn-comprar">Adicionar ao Carrinho</button>
        </div>

      </div>
    </main>
  </center>

  <footer>
    <p>&copy; 2025 Cultivar +</p>
  </footer>

  <script>
    // === FILTROS ===
    function filtrarProdutos() {
      const categoria = document.getElementById("categoriaFiltro").value;
      const preco = document.getElementById("precoFiltro").value;
      const produtos = document.querySelectorAll(".produto");
      const mensagem = document.getElementById("mensagemVazia");
      let produtosVisiveis = 0;

      produtos.forEach(produto => {
        const catProduto = produto.dataset.categoria;
        const precoProduto = Number(produto.dataset.preco); // valor numérico
        let exibir = true;

        // Categoria
        if (categoria && catProduto !== categoria) exibir = false;

        // Faixa de preço
        if (preco) {
          switch (preco) {
            case "1": if (!(precoProduto >= 2 && precoProduto <= 100)) exibir = false; break;
            case "2": if (!(precoProduto > 100 && precoProduto <= 500)) exibir = false; break;
            case "3": if (!(precoProduto > 500 && precoProduto <= 1000)) exibir = false; break;
            case "4": if (!(precoProduto > 1000 && precoProduto <= 10000)) exibir = false; break;
            case "5": if (!(precoProduto > 10000 && precoProduto <= 100000)) exibir = false; break;
            case "6": if (!(precoProduto > 100000 && precoProduto <= 500000)) exibir = false; break;
            case "7": if (!(precoProduto > 500000 && precoProduto <= 1000000)) exibir = false; break;
            case "8": if (!(precoProduto > 1000000 && precoProduto <= 5000000)) exibir = false; break;
            case "9": if (!(precoProduto > 5000000)) exibir = false; break;
          }
        }

        produto.style.display = exibir ? "block" : "none";
        if (exibir) produtosVisiveis++;
      });

      if (produtosVisiveis === 0) {
        mensagem.textContent = "Nenhum produto cadastrado com essas condições.";
        mensagem.style.display = "block";
      } else {
        mensagem.style.display = "none";
      }
    }

    // Limpar filtros
    function limparFiltros() {
      document.getElementById("categoriaFiltro").value = "";
      document.getElementById("precoFiltro").value = "";
      const produtos = document.querySelectorAll(".produto");
      produtos.forEach(produto => produto.style.display = "block");
      document.getElementById("mensagemVazia").style.display = "none";
    }

    // Limpar filtros
    function limparFiltros() {
      document.getElementById("categoriaFiltro").value = "";
      document.getElementById("precoFiltro").value = "";
      const produtos = document.querySelectorAll(".produto");
      produtos.forEach(produto => produto.style.display = "block");
      document.getElementById("mensagemVazia").style.display = "none";
    }



    // === AÇÕES DOS BOTÕES ===
    document.querySelectorAll(".produto").forEach((produto, index) => {
      const btnDescricao = produto.querySelector("button[class*='-descricao']");
      const btnCarrinho = produto.querySelector(".btn-comprar");

      // --- DESCRIÇÃO ---
      if (btnDescricao) {
        btnDescricao.addEventListener("click", () => {
          const nome = produto.querySelector("h2") ? produto.querySelector("h2").innerText : ("Produto " + (index + 1));
          const preco = produto.querySelector(".preco") ? produto.querySelector(".preco").innerText : "";
          const descricao = produto.querySelector(".descricao") ? produto.querySelector(".descricao").innerText : "";
          const imagem = produto.querySelector("img") ? produto.querySelector("img").getAttribute("src") : "";

          // Salvamos em duas chaves pra compatibilidade com páginas diferentes
          const produtoDescricao = { nome, preco, descricao, imagem };
          const produtoSelecionado = { id: index + 1, ...produtoDescricao };

          localStorage.setItem("produtoDescricao", JSON.stringify(produtoDescricao));
          localStorage.setItem("produtoSelecionado", JSON.stringify(produtoSelecionado));

          // Redireciona para a página de detalhes.
          // *Se sua página de detalhes se chama "Produto.html", mantém assim.*
          // *Se chama "produtos.html", troque abaixo para 'produtos.html'.*
          window.location.href = "Produto.html";
        });
      }

      // --- ADICIONAR AO CARRINHO ---
      if (btnCarrinho) {
        btnCarrinho.addEventListener("click", () => {
          const nome = produto.querySelector("h2") ? produto.querySelector("h2").innerText : ("Produto " + (index + 1));
          const preco = produto.querySelector(".preco") ? produto.querySelector(".preco").innerText : "";
          const descricao = produto.querySelector(".descricao") ? produto.querySelector(".descricao").innerText : "";
          const imagem = produto.querySelector("img") ? produto.querySelector("img").getAttribute("src") : "";

          let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
          carrinho.push({ nome, preco, descricao, imagem });
          localStorage.setItem("carrinho", JSON.stringify(carrinho));

          btnCarrinho.innerText = "Adicionado!";
          btnCarrinho.disabled = true;
          setTimeout(() => {
            btnCarrinho.innerText = "Adicionar ao Carrinho";
            btnCarrinho.disabled = false;
          }, 1500);
        });
      }
    });
  </script>

  <script>
// === CARREGAR PRODUTOS CADASTRADOS ===
// === CARREGAR PRODUTOS CADASTRADOS ===
function carregarProdutosCadastrados() {
    const produtosCadastrados = JSON.parse(localStorage.getItem('produtosCadastrados')) || [];
    const listaProdutos = document.getElementById('listaProdutos');
    
    console.log("Produtos cadastrados encontrados:", produtosCadastrados.length);
    
    if (produtosCadastrados.length === 0) return;
    
    produtosCadastrados.forEach((produto, index) => {
        // Criar elemento do produto
        const divProduto = document.createElement('div');
        divProduto.className = 'produto';
        divProduto.setAttribute('data-categoria', produto.categoria);
        divProduto.setAttribute('data-preco', produto.preco);
        
        // Offset para não conflitar com os IDs existentes
        const offsetId = 1000 + index;
        
        // Apenas mostra uma descrição curta no card (primeiras palavras)
        const descricaoCurta = produto.descricao.split(' ').slice(0, 10).join(' ') + '...';
        
        divProduto.innerHTML = `
            <img src="${produto.imagem}" alt="${produto.nome}" onerror="this.src='./imagens/placeholder.jpg'">
            <h2>${produto.nome}</h2>
            <p class="descricao">${descricaoCurta}</p>
            <p class="preco">R$ ${produto.preco.toFixed(2).replace('.', ',')}</p>
            <button class="btn${offsetId}-descricao">Descrição</button>
            <button class="btn-comprar">Adicionar ao Carrinho</button>
        `;
        
        listaProdutos.appendChild(divProduto);
        
        // Adicionar eventos aos botões
        const btnDescricao = divProduto.querySelector(`.btn${offsetId}-descricao`);
        const btnCarrinho = divProduto.querySelector('.btn-comprar');
        
        if (btnDescricao) {
            btnDescricao.addEventListener('click', () => {
                console.log("Clicou em descrição do produto:", produto.nome);
                
                const produtoDescricao = {
                    id: offsetId, // ID único para o produto
                    nome: produto.nome,
                    preco: `R$ ${produto.preco.toFixed(2).replace('.', ',')}`,
                    descricao: produto.descricaoCompleta || produto.descricao, // Descrição COMPLETA
                    imagem: produto.imagem
                };
                
                // Salva para o Produto.html
                localStorage.setItem("produtoDescricao", JSON.stringify(produtoDescricao));
                localStorage.setItem("produtoSelecionado", JSON.stringify(produtoDescricao));
                
                console.log("Redirecionando para Produto.html");
                // Redireciona para Produto.html
                window.location.href = "Produto.html";
            });
        }
        
        if (btnCarrinho) {
            btnCarrinho.addEventListener('click', () => {
                let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
                carrinho.push({
                    nome: produto.nome,
                    preco: `R$ ${produto.preco.toFixed(2).replace('.', ',')}`,
                    descricao: descricaoCurta, // Usa a descrição curta no carrinho
                    imagem: produto.imagem
                });
                localStorage.setItem("carrinho", JSON.stringify(carrinho));
                
                btnCarrinho.innerText = "Adicionado!";
                btnCarrinho.disabled = true;
                setTimeout(() => {
                    btnCarrinho.innerText = "Adicionar ao Carrinho";
                    btnCarrinho.disabled = false;
                }, 1500);
            });
        }
    });
}

// Carregar produtos cadastrados quando a página carregar
document.addEventListener('DOMContentLoaded', function() {
    carregarProdutosCadastrados();
});

// === ATUALIZAR LISTA DE PRODUTOS ===
function atualizarListaProdutos() {
    // Remove todos os produtos cadastrados atuais
    document.querySelectorAll('.produto').forEach(produto => {
        if (produto.querySelector('button[class*="btn"][class*="descricao"]')) {
            const btnClass = produto.querySelector('button[class*="btn"][class*="descricao"]').className;
            if (btnClass && btnClass.includes('btn') && parseInt(btnClass.match(/btn(\d+)-descricao/)?.[1]) >= 1000) {
                produto.remove();
            }
        }
    });
    
    // Recarrega os produtos cadastrados
    carregarProdutosCadastrados();
}

// Observar mudanças no localStorage para atualizar automaticamente
window.addEventListener('storage', function(e) {
    if (e.key === 'produtosCadastrados') {
        atualizarListaProdutos();
    }
});

// Também atualizar quando a página ganhar foco (útil quando voltar da admin)
window.addEventListener('focus', function() {
    atualizarListaProdutos();
});
  </script>

</body>

</html>